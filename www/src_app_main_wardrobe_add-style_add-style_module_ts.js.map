{"version":3,"file":"src_app_main_wardrobe_add-style_add-style_module_ts.js","mappings":"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","sources":["./src/app/main/wardrobe/add-style/add-style-routing.module.ts","./src/app/main/wardrobe/add-style/add-style.component.ts","./src/app/main/wardrobe/add-style/add-style.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AddStyleComponent } from './add-style.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddStyleComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddStyleRoutingModule {}\n","import { Location } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { WardRobeConstants } from 'src/app/app.constants';\nimport { ArticlesCardModalComponent } from 'src/shared/components/articles-card-modal/articles-card-modal.component';\nimport { IArticle } from 'src/shared/models/type';\nimport { ToasterService } from 'src/shared/services/toaster.service';\nimport { WardrobeService } from 'src/shared/services/wardrobe.service';\nimport { FirebaseAnalytics } from '@capacitor-community/firebase-analytics';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\n@Component({\n  selector: 'app-add-style',\n  templateUrl: './add-style.component.html',\n  styleUrls: ['./add-style.component.scss'],\n})\nexport class AddStyleComponent implements OnInit {\n  styleForm: FormGroup;\n  tabBar: HTMLElement;\n  moonSegment: HTMLElement;\n  currentTags = []; //change type\n  categoriesIds = WardRobeConstants.categoriesIndex;\n  currentArticles = new Map<string, IArticle[]>(); //enum id categories\n  wear_at_night = false;\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly modal: ModalController,\n    private readonly service: WardrobeService,\n    private readonly toasterService: ToasterService,\n    private readonly route: ActivatedRoute,\n    private readonly location: Location,\n    private readonly spinner: NgxSpinnerService\n  ) { }\n\n  ionViewWillEnter() {\n    this.tabBar.style.display = 'none';\n    FirebaseAnalytics.setScreenName({\n      screenName: \"AddStyleScreen\",\n      nameOverride: \"AddStyleScreen\",\n    });\n    FirebaseAnalytics.logEvent({\n      name: \"add_style_started\",\n      params: {},\n    });\n  }\n  ionViewWillLeave() {\n    this.tabBar.style.display = 'flex';\n  }\n  ionViewDidEnter() {\n    this.spinner.hide('appSpinner')\n  }\n  ngOnInit() {\n    this.tabBar = document.getElementById('tab-bar');\n    this.initForm();\n    this.initArticleMap();\n  }\n\n  onSelect() {\n    this.moonSegment = document.getElementById('moonSegment');\n    this.wear_at_night = !this.wear_at_night;\n  }\n  private initForm() {\n    this.styleForm = this.fb.group({\n      title: ['', [Validators.required, Validators.maxLength(32)]],\n      season_id: [0, Validators.required],\n      tags: [''],\n      weather_id: [0, Validators.required],\n    });\n  }\n  private initArticleMap() {\n    this.categoriesIds.forEach(id => this.currentArticles.set(id, []));\n  }\n\n  onAddTag(tag: string) {\n    if (tag !== '') {\n      this.currentTags.push({ name: tag });\n      this.styleForm.controls['tags'].reset('', { emitEvent: false });\n    }\n  }\n\n  onRemoveTag(index: number) {\n    this.currentTags.splice(index, 1);\n  }\n\n  async onOpenArticleCardModal(category: string) {\n    const modal = await this.modal.create({\n      component: ArticlesCardModalComponent,\n      componentProps: {\n        currentArticles: this.currentArticles.get(category),\n        category,\n      },\n    });\n    modal.onDidDismiss().then(result => {\n      if (result.data) {\n        this.currentArticles.set(result.data.category, result.data.articles);\n      }\n    });\n    await modal.present();\n  }\n\n  onSave() {\n    const style = this.styleForm.value; //create IStyle\n    //const form = this.styleForm.value;\n    style.tags = this.currentTags;\n    //style.customer_generated = true;\n    style.season_id = Number(style.season_id);\n    style.weather_id = Number(style.weather_id);\n    style.wear_at_night = this.wear_at_night;\n    style.items = [].concat(...this.currentArticles.values()).map(item => {\n      return { id: item.id };\n    });\n    return this.service.postNewStyle(style).subscribe(\n      (response: any) => {\n        FirebaseAnalytics.logEvent({\n          name: \"add_style_finished_successful\",\n          params: {},\n        });\n        this.toasterService.presentSuccessToast(`MESSAGE.WARDROBE_ITEMS.${response.status}`);\n        this.service.addNewStyle(response.body.data);\n        this.resetForm();\n        this.initArticleMap();\n        this.location.back();\n      },\n      error => {\n        FirebaseAnalytics.logEvent({\n          name: \"add_style_finished_error\",\n          params: {},\n        });\n        this.toasterService.presentErrorToast(error.status);\n      }\n\n    );\n  }\n\n  private resetForm() {\n    this.styleForm.reset();\n    this.currentTags = [];\n    this.currentArticles.clear();\n  }\n\n  isFormValid() {\n    return (\n      this.styleForm.valid &&\n      this.currentArticles.get('FAM_01').length &&\n      this.currentArticles.get('FAM_02').length\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from 'src/shared/shared.module';\nimport { AddStyleRoutingModule } from './add-style-routing.module';\nimport { AddStyleComponent } from './add-style.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, IonicModule, AddStyleRoutingModule, SharedModule],\n  declarations: [AddStyleComponent],\n  providers: [],\n})\nexport class AddStyleModule {}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}