{"version":3,"file":"src_app_onboarding_morphology_morphology_module_ts.js","mappings":"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","sources":["./src/app/onboarding/morphology/morphology-routing.module.ts","./src/app/onboarding/morphology/morphology.component.ts","./src/app/onboarding/morphology/morphology.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MorphologyComponent } from './morphology.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MorphologyComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MorphologyRoutingModule {}\n","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ActionSheetController, IonContent, IonSlides } from '@ionic/angular';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { ProfileConstants } from 'src/app/app.constants';\nimport { ShopperCRUDService } from 'src/shared/crud/shopper-crud.service';\nimport { ToasterService } from 'src/shared/services/toaster.service';\n\n@Component({\n  selector: 'app-morphology',\n  templateUrl: './morphology.component.html',\n  styleUrls: ['./morphology.component.scss'],\n})\nexport class MorphologyComponent implements OnInit {\n  @ViewChild(IonContent, { static: true }) ionContent: IonContent;\n  @ViewChild(IonSlides, { static: false }) ionSlides: IonSlides;\n  bodyForm: FormGroup;\n  isTooltipDisplayed = false;\n  genders = ProfileConstants.genders;\n  slidesOpts = {\n    allowTouchMove: false,\n    autoHeight: false,\n  };\n\n  slides: string[] = ProfileConstants.morphologySlides;\n  currentSlide = this.slides[0];\n\n  get height(): AbstractControl {\n    return this.bodyForm.get('height');\n  }\n  get chest(): AbstractControl {\n    return this.bodyForm.get('chest');\n  }\n  get weight(): AbstractControl {\n    return this.bodyForm.get('weight');\n  }\n  get birthDate(): AbstractControl {\n    return this.bodyForm.get('birth_date');\n  }\n\n  constructor(\n    private readonly shopperCrud: ShopperCRUDService,\n    private readonly router: Router,\n    private readonly toasterService: ToasterService,\n    private readonly spinner: NgxSpinnerService,\n    private cdr: ChangeDetectorRef,\n    private actionSheetController: ActionSheetController\n  ) { }\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  ionViewDidEnter() {\n    this.spinner.hide('guardSpinner');\n  }\n\n  segmentChanged(event) {\n    console.log(event);\n  }\n\n  async onPreviousButtonTouched() {\n    if (this.currentSlide === this.slides[0]) {\n      const actionSheet = await this.actionSheetController.create({\n        header: `Quitter l'onboarding`,\n        subHeader:\n          \"Si vous quittez l'onboarding maintenant vos informations saisies seront effacÃ©es, nous vous conseillons de le terminer\",\n        //cssClass: 'alert-delete-button',\n        buttons: [\n          {\n            text: `Quitter l'onboarding`,\n            role: 'destructive',\n            id: 'exit',\n            handler: () => {\n              this.router.navigate(['/main']);\n            },\n          },\n          {\n            text: 'Annuler',\n            role: 'cancel',\n            handler: () => {\n              console.log('Cancel clicked');\n            },\n          },\n        ],\n      });\n      await actionSheet.present();\n    } else {\n      this.ionSlides.slidePrev();\n    }\n  }\n\n  private initForm() {\n    this.bodyForm = new FormGroup({\n      height: new FormControl('', [\n        Validators.required,\n        Validators.min(0),\n        Validators.max(300),\n        Validators.pattern('^[0-9]*$'),\n      ]),\n      chest: new FormControl('', [\n        Validators.required,\n        Validators.min(0),\n        Validators.max(300),\n        Validators.pattern('^[0-9]*$'),\n      ]),\n      weight: new FormControl('', [\n        Validators.required,\n        Validators.min(0),\n        Validators.max(300),\n        Validators.pattern('^[0-9]*$'),\n      ]),\n      weight_min: new FormControl('', [\n        Validators.required,\n        Validators.min(0),\n        Validators.max(300),\n        Validators.pattern('^[0-9]*$'),\n      ]),\n      weight_max: new FormControl('', [\n        Validators.required,\n        Validators.min(0),\n        Validators.max(300),\n        Validators.pattern('^[0-9]*$'),\n      ]),\n    });\n  }\n\n  async onSlidesChanged() {\n    const index = await this.ionSlides.getActiveIndex();\n    this.currentSlide = this.slides[index];\n  }\n\n  onNextButtonTouched() {\n    this.ionSlides.slideNext();\n    this.ionContent.scrollToTop();\n    if (this.currentSlide === this.slides[3]) {\n    }\n    if (this.currentSlide === this.slides[2]) {\n      const doc = document.getElementById('content');\n      //doc.shadowRoot.getElementById('background-content').style.background = 'url(\"/assets/onboarding-background/congrats_morpho.svg\")';\n\n      /*if (this.bodyForm.valid) {\n        const profile_name = `${this.firstName.value} ${this.lastName.value}`;\n        this.auth.idTokenClaims$.subscribe((userInfos) => {\n          const shopper: IShopper = {\n            id: userInfos.sub,\n            first_name: this.firstName.value,\n            last_name: this.lastName.value,\n            email: userInfos.email,\n            date_of_birth: DateFormatter.convertDate(this.birthDate.value.singleDate.formatted, 'en'),\n            gender_id: Number(this.sexe.value),\n            nickname: this.nickname.value,\n            profile_name,\n            swipe_filter: { gender_id: Number(this.sexe.value) }\n          };\n          this.spinner.show('guardSpinner').then(() => {\n            this.shopperCrud.createShopper(shopper).subscribe({\n              next: () => {\n                this.router.navigate(['/thanks']);\n              },\n              error: (error) => {\n                this.toasterService.presentErrorToast(`MESSAGE.PROFILE.${error.status}`);\n                this.spinner.hide('guardSpinner');\n              }\n            })\n          })\n        })\n      }*/\n    }\n  }\n\n  onOpenTooltip() {\n    this.isTooltipDisplayed = !this.isTooltipDisplayed;\n    if (this.isTooltipDisplayed) {\n      document.getElementById('sexe-tooltip').style.visibility = 'visible';\n    } else {\n      document.getElementById('sexe-tooltip').style.visibility = 'hidden';\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from 'src/shared/shared.module';\nimport { MorphologyRoutingModule } from './morphology-routing.module';\nimport { MorphologyComponent } from './morphology.component';\n\n@NgModule({\n  imports: [SharedModule, MorphologyRoutingModule],\n  declarations: [MorphologyComponent],\n})\nexport class MorphologyModule {}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}