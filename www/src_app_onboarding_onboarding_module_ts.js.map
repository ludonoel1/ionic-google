{"version":3,"file":"src_app_onboarding_onboarding_module_ts.js","mappings":"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","sources":["./src/app/onboarding/onboarding-routing.module.ts","./src/app/onboarding/onboarding.component.ts","./src/app/onboarding/onboarding.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { OnboardingComponent } from './onboarding.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OnboardingComponent,\n  },\n  {\n    path: 'morphology',\n    loadChildren: () => import('./morphology/morphology.module').then(m => m.MorphologyModule),\n  },\n  {\n    path: 'budget',\n    loadChildren: () => import('./budget/budget.module').then(m => m.BudgetModule),\n  },\n  {\n    path: '',\n    redirectTo: '',\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OnBoardingRoutingModule {}\n","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { IonContent, IonDatetime, IonSlides } from '@ionic/angular';\nimport {\n  AngularMyDatePickerDirective,\n  IAngularMyDpOptions,\n  IMyDateModel,\n} from 'angular-mydatepicker';\nimport firebase from 'firebase/compat/app';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { ShopperCRUDService } from 'src/shared/crud/shopper-crud.service';\nimport { ToasterService } from 'src/shared/services/toaster.service';\nimport { DateFormatter } from 'src/shared/utils/date-formatter.utils';\nimport { ProfileConstants } from '../app.constants';\nimport { DataService } from 'src/shared/services/data.service';\nimport { IShopper } from 'src/shared/models/type';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { FirebaseAnalyticsPlugin } from '@capacitor-community/firebase-analytics';\nimport { FcmService } from 'src/shared/services/fcm.service';\nimport { AppStateService } from 'src/shared/state/app.state.service';\nimport { regexValidator } from 'src/shared/validators/regex-validator.directive';\n\n\n@Component({\n  selector: 'app-onboarding',\n  templateUrl: './onboarding.component.html',\n  styleUrls: ['./onboarding.component.scss'],\n})\nexport class OnboardingComponent implements OnInit {\n  @ViewChild(IonContent, { static: true }) ionContent: IonContent;\n  @ViewChild(IonSlides, { static: false }) ionSlides: IonSlides;\n  @ViewChild(IonDatetime) datetime: IonDatetime;\n\n  personalForm: FormGroup;\n  genders = ProfileConstants.genders;\n  slidesOpts = {\n    allowTouchMove: false,\n    autoHeight: false,\n  };\n\n  public myDatePickerOptions: IAngularMyDpOptions = {\n    dateRange: false,\n    selectorHeight: '230px',\n    selectorWidth: '230px',\n  };\n\n  slides: string[] = ProfileConstants.slideTitles;\n  currentSlide = this.slides[0];\n\n  get firstName(): AbstractControl {\n    return this.personalForm.get('firstName');\n  }\n  get lastName(): AbstractControl {\n    return this.personalForm.get('lastName');\n  }\n  get nickname(): AbstractControl {\n    return this.personalForm.get('nickname');\n  }\n  get sexe(): AbstractControl {\n    return this.personalForm.get('sexe');\n  }\n  get birthDate(): AbstractControl {\n    return this.personalForm.get('birth_date');\n  }\n\n  constructor(\n    private readonly shopperCrud: ShopperCRUDService,\n    private readonly router: Router,\n    private readonly toasterService: ToasterService,\n    private readonly spinner: NgxSpinnerService,\n    private readonly dataService: DataService,\n    private cdr: ChangeDetectorRef,\n    private readonly angularFireAuth: AngularFireAuth,\n    private fcmService: FcmService,\n    private appState: AppStateService\n  ) { }\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  ionViewDidEnter() {\n    this.spinner.hide('appSpinner');\n  }\n\n  private initForm() {\n    this.personalForm = new FormGroup({\n      firstName: new FormControl('', [\n        Validators.required,\n        regexValidator(/^[A-ZÀ-ÿ]/, \"La première lettre doit être une majuscule\"),\n        regexValidator(/^[a-zA-ZÀ-ÿ-,_\\/.' ]+$/, \"Seulement les lettres et ces caractères sont acceptés:  - _ / . ' ,\"),\n\n      ]),\n      lastName: new FormControl('', [\n        Validators.required,\n        regexValidator(/^[A-ZÀ-ÿ]/, \"La première lettre doit être une majuscule\"),\n        regexValidator(/^[a-zA-ZÀ-ÿ-,_\\/.' ]+$/, \"Seulement les lettres et ces caractères sont accptés:  - _ / . ' ,\"),\n      ]),\n      nickname: new FormControl('', [Validators.required, Validators.pattern('^[a-z0-9-_]+$')]),\n      birth_date: new FormControl('', Validators.required),\n      sexe: new FormControl('0', Validators.required),\n    });\n  }\n\n  async onSlidesChanged() {\n    const index = await this.ionSlides.getActiveIndex();\n    this.currentSlide = this.slides[index];\n  }\n\n  onNextButtonTouched() {\n    if (this.currentSlide === this.slides[0]) {\n      this.ionSlides.slideNext();\n      this.ionContent.scrollToTop();\n    }\n    if (this.currentSlide === this.slides[1]) {\n      this.ionContent.scrollToTop();\n      if (this.personalForm.valid) {\n        const profile_name = `${this.firstName.value} ${this.lastName.value}`;\n        this.angularFireAuth.currentUser.then((user: firebase.User) => {\n          const shopper: IShopper = {\n            firebase_id: user.uid,\n            first_name: this.firstName.value,\n            last_name: this.lastName.value,\n            email: user.email,\n            date_of_birth: this.birthDate.value,\n            gender_id: Number(this.sexe.value),\n            nickname: this.nickname.value,\n            profile_name,\n            swipe_filter: { gender_id: Number(this.sexe.value) },\n          };\n          /*this.spinner.show('guardSpinner').then(() => {\n            this.shopperCrud.createShopper(shopper).subscribe({\n              next: (response) => {\n                this.dataService.setData(\"user\", response.body.data)\n                this.appState.setUserInfos(response.body.data);\n                this.fcmService.initPush(response.body.data);\n                this.router.navigate(['/onboarding-beyond']);\n              },\n              error: error => {\n                this.toasterService.presentErrorToast(`MESSAGE.PROFILE.${error.status}`);\n              },\n            });\n          });*/\n        }\n        )\n      }\n    }\n  }\n\n  onDateChanged(date: any) {\n    const formattedDate = DateFormatter.formatDate(date, 'en');\n    this.birthDate.setValue(formattedDate, { emitEvent: false });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from 'src/shared/shared.module';\nimport { OnBoardingRoutingModule } from './onboarding-routing.module';\nimport { OnboardingComponent } from './onboarding.component';\n\n@NgModule({\n  imports: [OnBoardingRoutingModule, SharedModule],\n  declarations: [OnboardingComponent],\n})\nexport class OnBoardingModule {}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}