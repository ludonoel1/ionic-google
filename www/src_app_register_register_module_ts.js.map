{"version":3,"file":"src_app_register_register_module_ts.js","mappings":"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","sources":["./src/app/register/register-routing.module.ts","./src/app/register/register.module.ts","./src/app/register/register.page.ts","./src/shared/validators/password-requirement.directive.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\nimport { SharedModule } from 'src/shared/shared.module';\n\n@NgModule({\n  imports: [\n    ...SharedModule.MODULE_LIST,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterModule { }\n","import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { FormGroup, AbstractControl, Validators, FormControl } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { LoginService } from 'src/shared/services/login.service';\nimport { SubscriberComponent } from 'src/shared/utils/subscriber-component';\nimport { patternValidator } from 'src/shared/validators/password-requirement.directive';\nimport { ProfileConstants } from 'src/app/app.constants';\nimport { IonSlides, IonDatetime } from '@ionic/angular';\nimport firebase from 'firebase/compat/app';\nimport { ShopperCRUDService } from 'src/shared/crud/shopper-crud.service';\nimport { ToasterService } from 'src/shared/services/toaster.service';\nimport { IShopper } from 'src/shared/models/type';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { ICredential } from 'src/shared/models/user.model';\nimport { take } from 'rxjs/operators'\nimport { regexValidator } from 'src/shared/validators/regex-validator.directive';\nimport { setStyleStatusBar } from 'src/shared/utils/function.utils';\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage extends SubscriberComponent implements OnInit, AfterViewInit {\n  @ViewChild(IonSlides, { static: false }) ionSlides: IonSlides;\n  @ViewChild(IonDatetime) datetime: IonDatetime;\n\n  slides: string[] = ProfileConstants.registerSlides;\n  currentSlide = this.slides[0];\n  registrationProgress: number = 0.2;\n  slidesOpts = ProfileConstants.slidesOptions\n  isPasswordVisible: boolean = false;\n  index: number = 0;\n  emailCtrl: FormControl;\n  passwordCtrl: FormControl;\n  currentEmail: string;\n  refreshUserInterval: NodeJS.Timer;\n  personalForm: FormGroup;\n  genders = ProfileConstants.genders;\n\n\n\n  get firstName(): AbstractControl {\n    return this.personalForm.get('firstName');\n  }\n  get lastName(): AbstractControl {\n    return this.personalForm.get('lastName');\n  }\n  get nickname(): AbstractControl {\n    return this.personalForm.get('nickname');\n  }\n  get sexe(): AbstractControl {\n    return this.personalForm.get('sexe');\n  }\n  get birthDate(): AbstractControl {\n    return this.personalForm.get('birth_date');\n  }\n\n  constructor(\n    public loginService: LoginService,\n    public router: Router,\n    private readonly spinner: NgxSpinnerService,\n    private readonly shopperCrud: ShopperCRUDService,\n    private readonly angularFireAuth: AngularFireAuth,\n    private readonly toasterService: ToasterService,\n    private readonly route: ActivatedRoute\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.initCredentialForm();\n    this.initUserForm();\n  }\n\n  ngAfterViewInit() {\n    const id = Number(this.route.snapshot.paramMap.get('slide'));\n    this.angularFireAuth.currentUser.then(_user => this.currentEmail = _user?.email)\n    if (id) {\n      this.ionSlides.slideTo(id);\n      this.registrationProgress = this.registrationProgress * (id + 1);\n    }\n    if (id === 4) {\n      this.initRefresh()\n    }\n  }\n  ionViewDidEnter() {\n    setStyleStatusBar(\"light\")\n    this.spinner.hide('appSpinner');\n  }\n  private initCredentialForm(): void {\n    this.emailCtrl = new FormControl('', [Validators.required, Validators.email]);\n    this.passwordCtrl = new FormControl('', Validators.compose([\n      Validators.required,\n      patternValidator(/\\d/, { hasNumber: true }),\n      // 3. check whether the entered password has upper case letter\n      patternValidator(/[A-Z]/, { hasCapitalCase: true }),\n      // 4. check whether the entered password has a lower-case letter\n      patternValidator(/[a-z]/, { hasSmallCase: true }),\n      // 5. check whether the entered password has a special character\n      patternValidator(/[-._!\"`'#%&,:;<>=@{}~\\$\\(\\)\\*\\+\\/\\\\\\?\\[\\]\\^\\|]+/, { hasSpecialCharacters: true }),\n      // 6. Has a minimum length of 8 characters\n      Validators.minLength(8),\n      Validators.maxLength(25)])\n    )\n\n  }\n\n  private initRefresh(): void {\n    this.refreshUserInterval = setInterval(() => {\n      this.angularFireAuth.currentUser.then(_user => {\n        _user.reload().then(() => {\n          console.log(\"reload\")\n          if (_user.emailVerified) {\n            this.router.navigateByUrl('/onboarding-beyond', { replaceUrl: true });\n            clearInterval(this.refreshUserInterval);\n          }\n        })\n      })\n    }, 2500);\n  }\n\n\n  private initUserForm() {\n    this.personalForm = new FormGroup({\n      firstName: new FormControl('', [\n        Validators.required,\n        regexValidator(/^[A-ZÀ-ÿ]/, \"FIRST_LETTER_UPPERCASE\"),\n        regexValidator(/^[a-zA-ZÀ-ÿ-,_\\/.' ]+$/, \"FIRSTNAME_VALID_CHARS\"),\n\n      ]),\n      lastName: new FormControl('', [\n        Validators.required,\n        regexValidator(/^[A-ZÀ-ÿ]/, \"FIRST_LETTER_UPPERCASE\"),\n        regexValidator(/^[a-zA-ZÀ-ÿ-,_\\/.' ]+$/, \"FIRSTNAME_VALID_CHARS\"),\n      ]),\n      nickname: new FormControl('', [Validators.required, Validators.pattern('^[a-z0-9-_]+$')]),\n      birth_date: new FormControl('', Validators.required),\n      sexe: new FormControl('0', Validators.required),\n    });\n  }\n\n  onPreviousButtonTouched() {\n    if (this.currentSlide === this.slides[0]) {\n      this.router.navigateByUrl('/register-home', { replaceUrl: true });\n    } else {\n      this.ionSlides.slidePrev();\n      this.updateProgress(false);\n    }\n  }\n\n  onVerifyAvailableEmail(): void {\n    firebase.auth().fetchSignInMethodsForEmail(this.emailCtrl.value).then(result => {\n      if (result.length) {\n        this.emailCtrl.setErrors({ invalid: \"email-already-in-use\" })\n      } else {\n        this.ionSlides.slideNext();\n        this.updateProgress(true);\n      }\n    });\n  }\n\n  async onSlidesChanged() {\n    this.index = await this.ionSlides.getActiveIndex();\n    this.currentSlide = this.slides[this.index];\n  }\n\n  onRegister() {\n    const credentials: ICredential = {\n      email: this.emailCtrl.value,\n      password: this.passwordCtrl.value,\n    };\n\n    this.loginService.registerUser(credentials).then(() => {\n      this.router.navigateByUrl('/register/2', { replaceUrl: true });\n      this.currentEmail = credentials.email;\n    }).catch(error => {\n      this.passwordCtrl.setErrors({ invalid: error.message.split('/')[1] })\n    })\n\n  }\n\n  private updateProgress(isUp: boolean) {\n    this.registrationProgress += isUp ? 0.2 : - 0.2;\n  }\n\n  onGoToNextSlide() {\n    this.ionSlides.slideNext();\n    this.updateProgress(true);\n  }\n\n  onCreateShopper() {\n    if (this.personalForm.valid) {\n      const profile_name = `${this.firstName.value} ${this.lastName.value}`;\n      this.angularFireAuth.currentUser.then((user: firebase.User) => {\n        const shopper: IShopper = {\n          firebase_id: user.uid,\n          first_name: this.firstName.value,\n          last_name: this.lastName.value,\n          email: user.email,\n          date_of_birth: this.birthDate.value,\n          gender_id: Number(this.sexe.value),\n          nickname: this.nickname.value,\n          profile_name,\n          swipe_filter: { gender_id: Number(this.sexe.value) },\n        };\n        this.spinner.show('appSpinner').then(() => {\n          this.shopperCrud.createShopper(shopper).pipe(take(1)).subscribe({\n            next: (response) => {\n              this.spinner.hide('appSpinner');\n              this.router.navigateByUrl('/register/4', { replaceUrl: true });\n              this.currentEmail = user.email;\n            },\n            error: error => {\n              this.spinner.hide('appSpinner');\n              this.toasterService.presentErrorToast(`MESSAGE.PROFILE.${error.status}`);\n            },\n          });\n        });\n      }\n      )\n    }\n  }\n\n  onSendVerifyEmail(): void {\n    this.loginService.sendVerificationMail();\n  }\n\n  onLogout() {\n    this.loginService.signOut().then(() => {\n      clearInterval(this.refreshUserInterval)\n      this.router.navigateByUrl('/home', { replaceUrl: true });\n    })\n  }\n}","import { AbstractControl, ValidationErrors, ValidatorFn } from \"@angular/forms\";\n\nexport function patternValidator(regex: RegExp, error: ValidationErrors): ValidatorFn {\n  return (control: AbstractControl): { [key: string]: any } => {\n    if (!control.value) {\n      // if control is empty return no error\n      return null;\n    }\n\n    // test the value of the control against the regexp supplied\n    const valid = regex.test(control.value);\n\n    // if true, return no error (no error), else return error passed in the second parameter\n    return valid ? null : error;\n  };\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}